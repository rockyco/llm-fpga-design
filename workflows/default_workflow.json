{
  "generate_code": {
    "agent": "code_generator",
    "context": {
      "args": {
        "matlab_file": ["<MATLAB_FILE>"],
        "prompt": "<PROMPT_FILE>",
        "prompt_name": "hls_generation",
        "output_dir": "<OUTPUT_DIR>",
        "model": "gemini-2.5-pro-exp-03-25",
        "timeout": 600
      }
    },
    "update_context": {
      "component_dir": "output.stdout"
    },
    "next": "generate_makefile",
    "on_error": "stop"
  },
  "generate_makefile": {
    "agent": "makefile_generator",
    "context": {
      "work_dir": "<COMPONENT_DIR>",
      "component": "<COMPONENT>",
      "template_makefile": "<PROJECT_DIR>/scripts/Makefile"
    },
    "next": "build_csim",
    "on_error": "stop"
  },
  "build_csim": {
    "agent": "hls_builder",
    "context": {
      "work_dir": "<COMPONENT_DIR>",
      "target": "csim"
    },
    "next": "build_csynth",
    "on_error": "debug_errors"
  },
  "debug_errors": {
    "agent": "debug_assistant",
    "context": {
      "args": {
        "error_log": "<COMPONENT_DIR>/proj_<COMPONENT>/solution1/csim/report/<COMPONENT>_csim.log",
        "source_file": [
          "<COMPONENT_DIR>/<COMPONENT>.hpp",
          "<COMPONENT_DIR>/<COMPONENT>.cpp",
          "<COMPONENT_DIR>/<COMPONENT>_tb.cpp"
        ],
        "model": "gemini-2.5-pro-exp-03-25",
        "timeout": 300
      }
    },
    "next": "build_csim",
    "on_error": "build_csynth"
  },
  "build_csynth": {
    "agent": "hls_builder",
    "context": {
      "work_dir": "<COMPONENT_DIR>",
      "target": "csynth"
    },
    "next": {
      "context.get('optimize', False) == True": "optimize_code",
      "default": "build_cosim"
    },
    "on_error": "stop"
  },
  "optimize_code": {
    "agent": "performance_optimizer",
    "context": {
      "args": {
        "source_dir": "<COMPONENT_DIR>",
        "prompt_name": "performance_optimization",
        "model": "gemini-2.5-pro-exp-03-25",
        "primary_goal": "Reduce latency by at least 20%",
        "secondary_goal": "Maintain resource utilization"
      }
    },
    "next": "build_csynth_optimized",
    "on_error": "build_cosim"
  },
  "build_csynth_optimized": {
    "agent": "hls_builder",
    "context": {
      "work_dir": "<COMPONENT_DIR>",
      "target": "csynth"
    },
    "next": "build_cosim",
    "on_error": "build_cosim"
  },
  "build_cosim": {
    "agent": "hls_builder",
    "context": {
      "work_dir": "<COMPONENT_DIR>",
      "target": "cosim"
    },
    "next": "export_ip",
    "on_error": "stop"
  },
  "export_ip": {
    "agent": "hls_builder",
    "context": {
      "work_dir": "<COMPONENT_DIR>",
      "target": "export_ip"
    },
    "next": "build_impl",
    "on_error": "build_impl"
  },
  "build_impl": {
    "agent": "hls_builder",
    "context": {
      "work_dir": "<COMPONENT_DIR>",
      "target": "impl"
    },
    "next": "generate_documentation",
    "on_error": "generate_documentation"
  },
  "generate_documentation": {
    "agent": "documentation_generator",
    "context": {
      "component_dir": "<COMPONENT_DIR>",
      "component": "<COMPONENT>",
      "output_format": ["readme", "paper"],
      "model": "gemini-2.5-pro-exp-03-25"
    },
    "on_error": "stop"
  }
}
